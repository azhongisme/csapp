# hello.c >> hello
```c
#include <stdio.h>

int main() {
  printf("hello world\n");
  return 0;
}
```
## 预处理
根据以#开头的代码来修改原始程序，预处理会读取头文件中的内容，将其中的内容直接插入到源程序中，得到宁一个C程序，得到的文件通常.i结尾

hello.c >> hello.i(仍是文本文件)
## 编译
hello.i >> hello.s
## 汇编
翻译成机器指令，得到可重定位目标文件hello.o(二进制文件但不能执行)
## 链接
把hello.o和printf.o进行合并

# 理解编译系统好处
1.优化程序性能

2.理解链接时出现的错误

3.避免安全漏洞（缓冲区溢出）

# 硬件组成
## CPU
### PC
大小为一个字的存储区域```32-bit 1 word = 4 Byt 64-bit 1 word = 8 Byte```
### 寄存器文件
一个临时存放数据的空间
### 算术/逻辑单元 ALU

## 主存
由一组动态随机存取存储器（DRAM）芯片组成，逻辑上讲一个从零开始的数组

## 总线
贯穿整个计算机系统，将信息从一个部件传递到宁一个部件，通查被设计成传递定长的字节块，也就是字（word）

## I/O设备
通过一个控制器或适配器与I/O总线相连，控制器和适配器区别在于封装方式

## 三级高速缓存

# 运行hello
```shell
$ ./hello
```
shell程序将字符逐一读入寄存器，再放到内存中，当输入回车时，shell知道结束了命令的输入，shell通过一系列指令加载hello文件，将hello文件中的代码和数据从磁盘复制到主存，最终输出"hello world\n"

数据可以通过DMA（直接存储器存取）技术不经过处理器直接从磁盘到达主存。当hello文件中的代码和数据加载到主存，处理器就开始执行hello程序main中的代码，会将"hello world\n"从主存复制到寄存器文件，再从寄存器文件中复制到显示设备，最终显示在屏幕上

# 操作系统管理硬件
1.防止硬件被失控的程序调用

2.向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备
## 抽象
### 文件
对I/O的抽象
### 虚拟内存
对主存和磁盘I/O设备的抽象

为每一个进程提供一个假象，每个进程都在独占的使用主存，每个进程看到的内存都是一样的（虚拟地址空间）
### 进程
对处理器、主存和I/O设备的抽象

对于hello程序，最开始只有shell进程，通过系统调用来执行我们的请求（系统调用会将控制权传递给操作系统），操作系统会保存shell进程的上下文，创建一个新的hello进程，然后将控制权给hello进程，hello进程执行完后，操作系统会恢复shell进程的上下文并将控制权交给shell进程